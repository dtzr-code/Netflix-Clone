{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dtzr/Documents/GitHub/netflix-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dtzr/Documents/GitHub/netflix-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dtzr/Documents/GitHub/netflix-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import{useHistory}from'react-router';import{selectUser}from'../features/userSlice';import db,{auth}from'../firebase';import FullNav from'../FullNav';import PlanScreen from'./PlanScreen';import\"./ProfileScreen.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileScreen(){var history=useHistory();/* to use the email attribute */var user=useSelector(selectUser);// To get the user subscription plan name\nvar _useState=useState(\"NIL\"),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];useEffect(function(){db.collection(\"customers\").doc(user.uid).collection('subscriptions').get().then(function(querySnapshot){/* querySnapshot represents the result of a query */ /* loop through forEach subscriptions and retrieve the role attribute, current period start and end */querySnapshot.forEach(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(subscription){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCurrent({role:subscription.data().role});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());});},[user.uid]);var signout=function signout(){auth.signOut();history.push('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen\",children:[/*#__PURE__*/_jsx(FullNav,{}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen__body\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen__info\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://occ-0-3069-58.1.nflxso.net/dnm/api/v6/K6hjPJd6cR6FpVELC5Pd6ovHRSk/AAAABcGt38lP6INwT06gZ5Nn1fi8zT7r-ad0GfCsiLhB6zibZZCCCq_0EdrPvh5_-xs-pNl0Bilexan-d2mjkdyUGLbcEgB7.png?r=8aa\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen__details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen__plans\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Plans (Current Plan: \",current.role,\")\"]}),/*#__PURE__*/_jsx(PlanScreen,{}),/*#__PURE__*/_jsx(\"button\",{onClick:signout,className:\"profileScreen__signOut\",children:\"Sign Out\"})]})]})]})]})]});}export default ProfileScreen;","map":{"version":3,"sources":["/Users/dtzr/Documents/GitHub/netflix-clone/src/screens/ProfileScreen.js"],"names":["React","useEffect","useState","useSelector","useHistory","selectUser","db","auth","FullNav","PlanScreen","ProfileScreen","history","user","current","setCurrent","collection","doc","uid","get","then","querySnapshot","forEach","subscription","role","data","signout","signOut","push","email"],"mappings":"geAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,EAAP,EAAaC,IAAb,KAAyB,aAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAO,qBAAP,C,wFAEA,QAASC,CAAAA,aAAT,EAAyB,CAEvB,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CAEA,gCACA,GAAMQ,CAAAA,IAAI,CAAGT,WAAW,CAACE,UAAD,CAAxB,CAEA;AACA,cAA8BH,QAAQ,CAAC,KAAD,CAAtC,wCAAOW,OAAP,eAAgBC,UAAhB,eACAb,SAAS,CAAC,UAAK,CACXK,EAAE,CAACS,UAAH,CAAc,WAAd,EACGC,GADH,CACOJ,IAAI,CAACK,GADZ,EAEGF,UAFH,CAEc,eAFd,EAGGG,GAHH,GAIGC,IAJH,CAIQ,SAAAC,aAAa,CAAI,CAErB,oDAFqB,CAGrB,sGACAA,aAAa,CAACC,OAAd,0FAAuB,iBAAMC,YAAN,kHACrBR,UAAU,CAAC,CACTS,IAAI,CAAED,YAAY,CAACE,IAAb,GAAoBD,IADjB,CAAD,CAAV,CADqB,sDAAvB,gEAKD,CAbH,EAcH,CAfQ,CAeN,CAACX,IAAI,CAACK,GAAN,CAfM,CAAT,CAiBA,GAAMQ,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBlB,IAAI,CAACmB,OAAL,GACAf,OAAO,CAACgB,IAAR,CAAa,GAAb,EACD,CAHD,CAMA,mBACE,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,OAAD,IADF,kBAEE,aAAK,SAAS,CAAC,qBAAf,wBACE,oCADF,cAEE,aAAK,SAAS,CAAC,qBAAf,wBACE,YACE,GAAG,CAAC,sLADN,CAEE,GAAG,CAAC,EAFN,EADF,cAKE,aAAK,SAAS,CAAC,wBAAf,wBACE,oBAAKf,IAAI,CAACgB,KAAV,EADF,cAEE,aAAK,SAAS,CAAC,sBAAf,wBAEE,8CAA0Bf,OAAO,CAACU,IAAlC,OAFF,cAIE,KAAC,UAAD,IAJF,cAQE,eACE,OAAO,CAAEE,OADX,CAEE,SAAS,CAAC,wBAFZ,sBARF,GAFF,GALF,GAFF,GAFF,GADF,CA8BD,CAED,cAAef,CAAAA,aAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router'\nimport { selectUser } from '../features/userSlice'\nimport db, { auth } from '../firebase'\nimport FullNav from '../FullNav'\nimport PlanScreen from './PlanScreen'\nimport \"./ProfileScreen.css\"\n\nfunction ProfileScreen() {\n\n  const history = useHistory();\n  \n  /* to use the email attribute */\n  const user = useSelector(selectUser)\n\n  // To get the user subscription plan name\n  const [current, setCurrent] = useState(\"NIL\")\n  useEffect(()=> {\n      db.collection(\"customers\")\n        .doc(user.uid)\n        .collection('subscriptions')\n        .get()\n        .then(querySnapshot => {\n\n          /* querySnapshot represents the result of a query */\n          /* loop through forEach subscriptions and retrieve the role attribute, current period start and end */\n          querySnapshot.forEach( async subscription => {\n            setCurrent({\n              role: subscription.data().role\n            });\n          });\n        });\n  }, [user.uid])\n\n  const signout = () => {\n    auth.signOut();\n    history.push('/');\n  }\n\n\n  return (\n    <div className='profileScreen'>\n      <FullNav/> {/* Reusing the nav bar */}\n      <div className=\"profileScreen__body\">\n        <h1>Edit Profile</h1>\n        <div className=\"profileScreen__info\">\n          <img \n            src=\"https://occ-0-3069-58.1.nflxso.net/dnm/api/v6/K6hjPJd6cR6FpVELC5Pd6ovHRSk/AAAABcGt38lP6INwT06gZ5Nn1fi8zT7r-ad0GfCsiLhB6zibZZCCCq_0EdrPvh5_-xs-pNl0Bilexan-d2mjkdyUGLbcEgB7.png?r=8aa\"\n            alt=\"\"\n          />\n          <div className=\"profileScreen__details\">\n            <h2>{user.email}</h2>\n            <div className=\"profileScreen__plans\">\n              {/* Showing current plan: beside h3 element plans */}\n              <h3>Plans (Current Plan: {current.role})</h3>\n\n              <PlanScreen/>\n\n              {/* Upon clicking to sign out, it will go to App.js and triggers off the listerner because the authentications tate changed */}\n              {/* Now there is no userAuth, so it will dispatch the  logout action so now user is now null and retunrs back to the login screen*/}\n              <button \n                onClick={signout}\n                className=\"profileScreen__signOut\"\n              >Sign Out</button>\n            </div>\n         </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProfileScreen\n"]},"metadata":{},"sourceType":"module"}